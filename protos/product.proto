syntax = "proto3";
option csharp_namespace = "gs_server.Protobufs";

import "gs_protobufs/protos/decimal.proto";

package gs_protobufs.product;

service ProductService {
  rpc GetAll(GetAllProductsRequest) returns (GetAllProductsResponse);
  rpc GetById(GetProductByIdRequest) returns (GetProductByIdResponse);
  rpc Post(CreateProductRequest) returns (CreateProductResponse);
  rpc Put(UpdateProductRequest) returns (UpdateProductResponse);
  rpc Delete(DeleteProductRequest) returns (DeleteProductResponse);

  rpc GetAllBrands(GetAllProductBrandsRequest) returns (GetAllProductBrandsResponse);
  rpc PostBrand(CreateProductBrandRequest) returns (CreateProductBrandResponse);
  rpc GetAllCategorys(GetAllProductCategorysRequest) returns (GetAllProductCategorysResponse);
  rpc PostCategory(CreateProductCategoryRequest) returns (CreateProductCategoryResponse);
}

message GetAllProductsRequest {}

message GetAllProductsResponse {
  repeated GetProductByIdResponse products = 1;
}

message GetProductByIdRequest {
  int32 product_id = 1;
}

message GetProductByIdResponse {
  int32 product_id = 1;
  string name = 2;
  string description = 3;
  optional string picture_path = 4;
  optional int32 product_brand_id = 5;
  optional int32 product_category_id = 6;
  repeated ProductVariant variants = 7;
}

message CreateProductRequest {
  string name = 2;
  string description = 3;
  optional bytes picture_binary = 4;
  optional int32 product_brand_id = 5;
  optional int32 product_category_id = 6;
  repeated ProductVariant variants = 7;
}

message CreateProductResponse {}

message UpdateProductRequest {
  int32 product_id = 1;
  string name = 2;
  string description = 3;
  optional bytes picture_binary = 4;
  optional int32 product_brand_id = 5;
  optional int32 product_category_id = 6;
  repeated ProductVariant variants = 7;
}

message UpdateProductResponse {}

message DeleteProductRequest {
  int32 product_id = 1;
}

message DeleteProductResponse {}

message GetAllProductBrandsRequest {}

message GetAllProductBrandsResponse {
  repeated ProductBrand brands = 1;
}

message CreateProductBrandRequest {
  int32 product_brand_id = 1;
  string name = 2;
}

message CreateProductBrandResponse {}

message ProductBrand {
  int32 product_brand_id = 1;
  string name = 2;
}

message GetAllProductCategorysRequest {}

message GetAllProductCategorysResponse {
  repeated ProductCategory brands = 1;
}

message CreateProductCategoryRequest {}

message CreateProductCategoryResponse {
  int32 product_category_id = 1;
  string name = 2;
}

message ProductCategory {
  int32 product_category_id = 1;
  string name = 2;
}

message ProductVariant {
  int32 product_variant_id = 1;
  string color = 2;
  string size = 3;
  string bar_code = 4;
  string sku = 5;
  gs_protobufs.decimal_value.DecimalValue unit_price = 6;
  ProductVariantInventory inventory = 7;
}

message ProductVariantInventory {
  int32 product_variant_inventory_id = 1;
  int32 product_variant_id = 2;
  int32 quantity_available = 3;
  int32 minimum_stock_amount = 4;
}
