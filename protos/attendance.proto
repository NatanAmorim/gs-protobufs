syntax = "proto3";
option csharp_namespace = "GsServer.Protobufs";

import "gs_protobufs/protos/calendar_date.proto";
import "google/protobuf/wrappers.proto";

package gs_protobufs.attendance;
service AttendanceService {
  rpc GetPaginated(GetPaginatedAttendancesRequest) returns (GetPaginatedAttendancesResponse);
  rpc GetById(GetAttendanceByIdRequest) returns (GetAttendanceByIdResponse);
  rpc Post(CreateAttendanceRequest) returns (CreateAttendanceResponse);
  rpc Put(UpdateAttendanceRequest) returns (UpdateAttendanceResponse);
  rpc Delete(DeleteAttendanceRequest) returns (DeleteAttendanceResponse);
}

message GetPaginatedAttendancesRequest {
  int32 cursor = 1;
}

message GetPaginatedAttendancesResponse {
  repeated GetAttendanceByIdResponse attendances = 1;
  google.protobuf.Int32Value next_cursor = 2;
}

message GetAttendanceByIdRequest {
  int32 attendance_pk = 1;
}

message GetAttendanceByIdResponse {
  int32 attendance_pk = 1;
  int32 discipline_fk = 2;
  gs_protobufs.custom_types.CalendarDate date = 3;
  repeated int32 students_present_fks = 4;
  repeated int32 students_absent_fks = 5;
  string observations = 6;
}

message CreateAttendanceRequest {
  int32 discipline_pk = 2;
  gs_protobufs.custom_types.CalendarDate date = 3;
  repeated int32 students_present_fks = 4;
  repeated int32 students_absent_fks = 5;
  string observations = 6;
}

message CreateAttendanceResponse {}

message UpdateAttendanceRequest {
  int32 attendance_pk = 1;
  int32 discipline_fk = 2;
  gs_protobufs.custom_types.CalendarDate date = 3;
  repeated int32 students_present_fks = 4;
  repeated int32 students_absent_fks = 5;
  string observations = 6;
}

message UpdateAttendanceResponse {}

message DeleteAttendanceRequest {
  int32 attendance_pk = 1;
}

message DeleteAttendanceResponse {}
